پروژه کتابفروشی دیجیتال

در این پروژه برای تمامی سرویس ها از دیتابیس MongoDB توسط کتابخانه mongoose استفاده شده است و برای افزایش سرعت کوئری ها همه درخواست های خواند توسط متد lean انجام شده است

پروژه شامل سه سرویس می باشد:

۱- سرویس user
  این سرویس حاوی اطلاعات کاربران و فرآیند احراز هویت و همچنین پلن های پرمیوم می باشد
  وب سرویس ورود و ثبت نام یکسان است و با وارد کردن شماره تلفن و سپس تایید شماره توسط کد انجام می شود
  سیستم احراز هویت شامل کلید رفرش و کلید دسترسی است
  کلید دسترسی با استفاده از مکانیسم jwt ساخته شده است
  همه سرویس ها قابلیت دیکد کردن کلید دسترسی را دارا می باشند ولی رفرش کردن کلید دسترسی و ساخت کلید رفرش فقط از طریق این سرویس استفاده می شود.
  علت انتخاب این سبک کاهش ترافیک روی این سرویس است.

۲- سرویس product
  این سرویس شامل اطلاعات کتاب ها و نویسنده ها و دسته بندی ها و ناشران و ثبت امتیاز و سبد خرید است
  هر کتاب می تواند چندین دسته بندی و نویسنده داشته باشد. نویسنده دارای انواع مختلف از جمله نویسنده اصلی و مترجم و ویراستار است.
  ساختار دسته بندی ها به صورت درختی در نظر گرفته شده است

۳- سرویس transaction
  این سرویس برای ثبت تراکنش در نظر گرفته شده است و از طریق kafka و REST  با دو سرویس دیگر ارتباط دارد
  فرآیند پرداخت توسط درگاه انجام می شود
  از درگاه زیبال برای این پروژه استفاده شده است که علت آن ارائه درگاه تستی توسط زیبال می باشد


فرضیات:

  ۱- کتاب ها فقط قابلیت خواندن داخل برنامه را دارند و به همین علت سبد خرید شامل تعداد برای هر آیتم نمی شود
  بنابراین محدودیت تعداد وجود ندارد

  ۲- ادمین های سیستم دارای سطوح داینامیک نمی باشند و فقط دو سطح ادمین معمولی و ادمین اصلی درنظر گرفته شده است
    به همین علت هر سرویس بدون نیاز به ارتباط با سرویس کابر می تواند به سطح دسترسی کاربران را به متد ها بررسی کنند

الگوریتم محبوبترین کتاب ها:

  این الگوریتم از دو پارامتر پیروی می کند
  پارامتر اول از تقسیم امتیاز کتاب به بیشترین امتیاز ممکن ساخته می شود
  پارامتر دوم از تقسیم تعداد آرای کتاب به بیشترین رای داده شده به یک کتاب ساخته می شود
  با در نظر گرفتن وزن پارامتر اول که دو برابر پارامتر دوم است این دو پارامتر با هم جمع می شوند و با استفاده از عدد حاصل شده محبوب ترین کتاب ها شناسایی می شوند
  محبوب تری کتاب ها و پرفروش ترین کتاب ها و جدیدترین کتاب ها همراه با فیلتر های ناشر و نویسنده و دسته بندی توسط ردیس کش می شوند

الگوریتم سبد خرید:

  هر کابر دارای یک سبد خرید می باشد که به صورت داینامیک با اضافه کردن آیتم ایجاد می شود
  یک متد پرداخت برای سبد خرید در نظر گرفته شده است که با صدا زدن آن یک سفارش شامل آیتم های های موجود در سبد خرید ثبت می شود و در صورت نیاز به پرداخت از طریق سرویس تراکنش کاربر به درگاه هدایت می شود و در صورت موفق بودن تراکنش سبد خرید خالی می شود

بهبود ها و ویژگی ها در صورت داشتن زمان بیشتر:
  
  ۱- یک فرآیند ارور هندلینگ مخصوصا برای سرویس تراکنش در نظر میگرفتم
  ۲- برای سرویس ها یک لایه فیلتر خطا طراحی می کردم
  ۳- یک سرویس نوتیفیکیشن برای کار کردن با انواع اعلانات طراحی می کردم
  ۴- لاگ های سیستم را با استفاده از ابزار پیشرفته هندل می کردم
  ۵- الگوریتم کتاب های محبوب را به پارامتر های بیشتری وابسته میکردم
  ۶- یک متد سرچ برای جستجو در کتاب ها و نویسنده ها و دسته بندی ها و ناشران طراحی می کردم

چالش ها:
  
  ۱- الگوریتم محبوب ترین کتاب ها
  ۲- dockerize kafka
  